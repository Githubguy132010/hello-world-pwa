<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Hello World PWA</title>
  <link rel="manifest" href="manifest.json">
</head>
<body>
  <h1>Hello World PWA</h1>
  <div id="notifications"></div>
  <script>
    // Register service worker
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js')
        .then(reg => console.log('Service Worker registered', reg))
        .catch(err => console.error('Service Worker registration failed', err));
    }
    // Connect to WebSocket
    const wsProtocol = window.location.protocol === 'https:' ? 'wss' : 'ws';
    const socket = new WebSocket(wsProtocol + '://' + window.location.host);
    socket.addEventListener('message', event => {
      const data = JSON.parse(event.data);
      const p = document.createElement('p');
      p.textContent = data.message;
      document.getElementById('notifications').appendChild(p);
    });
  </script>
</body>
</html>
